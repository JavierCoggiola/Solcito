{% load static %}
{% load staticfiles %}

<html lang="es">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Solcito</title>

        <!-- Bootstrap Core CSS -->
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="{% static 'css/sb-admin.css' %}" rel="stylesheet">

        <!-- Morris Charts CSS -->
        <link href="{% static 'css/plugins/morris.css' %}" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="{% static 'font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css">
        <style>
            @media(min-width:768px) {
                .side-nav {
                    position: fixed;
                    top: 51px;
                    left: 225px;
                    width: 0px;
                    margin-left: -225px;
                    border: none;
                    border-radius: 0;
                    overflow-y: auto;
                    background-color: #222;
                    bottom: 0;
                    overflow-x: hidden;
                    padding-bottom: 40px;
                }

                .side-nav>li>a {
                    width: 225px;
                }

                .side-nav li a:hover,
                .side-nav li a:focus {
                    outline: none;
                    background-color: #000 !important;
                }
            }

            .side-nav>li>ul {
                padding: 0;
            }

            .side-nav>li>ul>li>a {
                display: block;
                padding: 10px 15px 10px 38px;
                text-decoration: none;
                color: #999;
            }

            .side-nav>li>ul>li>a:hover {
                color: #fff;
            }
            @media(min-width:768px) {
                #wrapper {
                    padding-left: 0px;
                }

                #page-wrapper {
                    padding: 0px;
                }
            }


        </style>
    </head>

    <body>

        <div id="wrapper">

            <!-- Navigation -->
            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" >
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/" ><i class="fa fa-sun-o" aria-hidden="true"></i> Solcito - Gestion de Administracion</a>
                </div>
                <!-- Top Menu Items -->
                <ul class="nav navbar-right top-nav">
                    <li class="dropdown">
                        <a href="{% url 'Solcito:login' %}" ><i class="fa fa-user"></i> Iniciar Sesion</a>
                    </li>
                </ul>
                <!-- /.navbar-collapse -->
            </nav>

            <!--Aca va lo nuestro-->
            <div id="page-wrapper">
                <div class="container-fluid">
                    <div class="col-lg-6">
                        <h2 align="center">Datos del Alumno</h2>
                        <br>
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                                            Formulario Alumno</a>
                                    </h4>
                                </div>
                            </div>
                            <div id="collapse1" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <form role="form" class="form-inline" method="POST"  action="{% url 'Solcito:edit_matricula' %} "enctype="multipart/form-data">{% csrf_token %}
                                        <div id="form_wrapper">
                                            {{ form.as_p }}
                                            <a href="#" class="grey-text waves-effect waves-orange btn-flat">Cancelar</a>
                                            <button type="submit" class="white-text waves-effect orange waves btn">GUARDAR CAMBIOS</button>
                                        </div>
                                    </form>
                                </div>
                                <table>
                                    <tr>
                                        <td>
                                            <h2 align="center">Foto</h2>
                                            <h5 align="center">Peso máximo 5mb (solo png/jpeg)</h5>
                                            <div>
                                                <form action="{% url 'Solcito:subirPhoto' %}" method="POST" enctype="multipart/form-data" id="cargar"> {% csrf_token %}
                                                    <div align="center">
                                                        <img id='alum' src="{% static 'images/up.jpg' %}" alt='Foto alumno' style='width:220px; height:220px;margin-left:3%;'/>
                                                        <input type='file' id='photo' name='photo' multiple accept='image/png,image/jpeg'/>
                                                    </div>
                                                    <input name="nombre" id="form-nombre-alumno" type="hidden" class="form-control">
                                                    <input name="apellido" id="form-apellido-alumno" type="hidden" class="form-control">
                                                    <input name="dni" id="form-dni-alumno" type="hidden" class="form-control" >
                                                    <button id="crear" hidden="true">Subir Foto</button>
                                                </form>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <h2 align="center">Datos de los Padres</h2>
                        <br>
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
                                            Formulario Padre</a>
                                    </h4>
                                </div>
                            </div>
                            <div id="collapse2" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <form role="form">
                                        <div class="form-group">
                                            <label>Nombre del padre*</label>
                                            <input id="inp-nombre-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Apellido del padre*</label>
                                            <input id="inp-apellido-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>DNI*</label>
                                            <input id="inp-dni-padre"type="number"class="form-control" >
                                        </div>

                                        <div class="form-group">
                                            <label>Cuil*</label>
                                            <input id="inp-cuil-padre"type="number"class="form-control" >
                                        </div>

                                        <div class="form-group">
                                            <label>Lugar de trabajo*</label>
                                            <input id="inp-trabajo-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Profesion*</label>
                                            <input id="inp-profesion-padre" class="form-control" >
                                        </div>

                                        <div class="form-group">
                                            <label>Nacionalidad*</label>
                                            <input id="inp-nacionalidad-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Calle de domicilio*</label>
                                            <input id="inp-calle-padre" class="form-control" placeholder="Calle de residencia del padre">
                                        </div>
                                        <div class="form-group">
                                            <label>Numero*</label>
                                            <input id="inp-numcalle-padre" class="form-control" type="number">
                                        </div>
                                        <label>Barrio de domicilio*</label>
                                        <input id="inp-barrio-padre" class="form-control" >

                                        <div class="form-group">
                                            <label>Torre</label>
                                            <input id="inp-torre-padre" class="form-control" placeholder="En caso de ser necesario especificar la torre de residencia">
                                        </div>
                                        <div class="form-group">
                                            <label>Piso</label>
                                            <input id="inp-piso-padre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Departamento</label>
                                            <input id="inp-dpto-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Codigo Postal*</label>
                                            <input id="inp-postal-padre" type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Localidad*</label>
                                            <input id="inp-localidad-padre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Email*</label>
                                            <input id="inp-email-padre" class="form-control" type="email">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono Fijo*</label>
                                            <input id="inp-fijo-padre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono celular</label>
                                            <input id="inp-celular-padre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono laboral</label>
                                            <input id="inp-tlaboral-padre" class="form-control" type="number">
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                                            Formulario Madre</a>
                                    </h4>
                                </div>
                            </div>
                            <div id="collapse1" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <form role="form">
                                        <div class="form-group">
                                            <label>Nombre de la madre*</label>
                                            <input id="inp-nombre-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Apellido de la madre*</label>
                                            <input id="inp-apellido-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>DNI*</label>
                                            <input id="inp-dni-madre"type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Cuil*</label>
                                            <input id="inp-cuil-madre"type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Lugar de trabajo*</label>
                                            <input id="inp-trabajo-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Profesion*</label>
                                            <input id="inp-profesion-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Nacionalidad*</label>
                                            <input id="inp-nacionalidad-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Calle de domicilio*</label>
                                            <input id="inp-calle-madre" class="form-control" placeholder="Calle de residencia de la madre">
                                        </div>
                                        <div class="form-group">
                                            <label>Numero*</label>
                                            <input id="inp-numcalle-madre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Barrio de domicilio*</label>
                                            <input id="inp-barrio-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Torre</label>
                                            <input id="inp-torre-madre" class="form-control" placeholder="En caso de ser necesario especificar la torre de residencia">
                                        </div>
                                        <div class="form-group">
                                            <label>Piso</label>
                                            <input id="inp-piso-madre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Departamento</label>
                                            <input id="inp-dpto-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Codigo Postal*</label>
                                            <input id="inp-postal-madre" type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Localidad *</label>
                                            <input id="inp-localidad-madre" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Email*</label>
                                            <input id="inp-email-madre" class="form-control" type="email">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono Fijo*</label>
                                            <input id="inp-fijo-madre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono celular</label>
                                            <input id="inp-celular-madre" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono laboral</label>
                                            <input id="inp-tlaboral-madre" class="form-control" type="number">
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
                                            Formulario Tutor</a>
                                    </h4>
                                </div>
                            </div>
                            <div id="collapse3" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <form role="form">
                                        <div class="form-group">
                                            <label>Nombre del tutor*</label>
                                            <input id="inp-nombre-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Apellido del tutor*</label>
                                            <input id="inp-apellido-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>DNI*</label>
                                            <input id="inp-dni-tutor"type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Cuil*</label>
                                            <input id="inp-cuil-tutor"type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Lugar de trabajo*</label>
                                            <input id="inp-trabajo-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Profesion*</label>
                                            <input id="inp-profesion-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Nacionalidad*</label>
                                            <input id="inp-nacionalidad-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Calle de domicilio*</label>
                                            <input id="inp-calle-tutor" class="form-control" placeholder="Calle de residencia del tutor">
                                        </div>
                                        <div class="form-group">
                                            <label>Numero*</label>
                                            <input id="inp-numcalle-tutor" class="form-control" type="number">
                                        </div>
                                        <label>Barrio de domicilio*</label>
                                        <input id="inp-barrio-tutor" class="form-control" >
                                        <div class="form-group">
                                            <label>Torre</label>
                                            <input id="inp-torre-tutor" class="form-control" placeholder="En caso de ser necesario especificar la torre de residencia">
                                        </div>
                                        <div class="form-group">
                                            <label>Piso</label>
                                            <input id="inp-piso-tutor" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Departamento</label>
                                            <input id="inp-dpto-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Codigo Postal*</label>
                                            <input id="inp-postal-tutor" type="number"class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Localidad*</label>
                                            <input id="inp-localidad-tutor" class="form-control" >
                                        </div>
                                        <div class="form-group">
                                            <label>Email*</label>
                                            <input id="inp-email-tutor" class="form-control" type="email">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono Fijo*</label>
                                            <input id="inp-fijo-tutor" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono celular</label>
                                            <input id="inp-celular-tutor" class="form-control" type="number">
                                        </div>
                                        <div class="form-group">
                                            <label>Telefono laboral</label>
                                            <input id="inp-tlaboral-tutor" class="form-control" type="number">
                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12" align="right">
                        <div class="panel-heading">
                            <button id="confirm_matricula" class="btn btn-primary btn-lg">Guardar Matricula</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.container-fluid -->
        </div>
        </div>
    <div class="modal fade" id="cartel_error" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="textoError"> </h4>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-warning" id="btn-volver" onclick="$('#cartel_error').modal('hide');" type="button">
                        Volver
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery -->
    <script src="{% static 'js/jquery.js' %}"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <!-- Morris Charts JavaScript -->
    <script src="{% static 'js/plugins/morris/raphael.min.js' %}"></script>
    <script src="{% static 'js/plugins/morris/morris.min.js' %}"></script>
    <script src="{% static 'js/plugins/morris/morris-data.js' %}"></script>

    <script>


        /*previsualisacion de foto*/
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#alum').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        $('#photo').change(function(){
            readURL(this);
        });

        function verificacionAlumno(){
            if ($('#inp-nombre-alumno').val()==""
                || $('#inp-apellido-alumno').val()==""
                || $('#inp-dni-alumno').val()==""
                || $('#inp-religion-alumno').val()==""
                || $('#inp-nacionalidad-alumno').val()==""
                || $('#inp-fijo-alumno').val()==""
                || $('#inp-mail-alumno').val()==""
                || $('#inp-nacimiento-alumno').val()==""
                || $('#inp-lugar_nacimiento-alumno').val()==""
                || $('#inp-localidad-alumno').val()==""
                || $('#inp-barrio-alumno').val()==""
                || $('#inp-calle-alumno').val()==""
                || $('#inp-altura-alumno').val()==""
                || $('#inp-postal-alumno').val()==""){
                $('#textoError').text("Los campos señalados por * son obligatorios");
                $('#cartel_error').modal('show');
                return false;
            }
            if( !isEmail($('#inp-mail-alumno').val())) {
                $('#textoError').text("Email Alumno Invalido");
                $('#cartel_error').modal('show');
                return false;
            }
            return true;
        }


        function isEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
        }


        function verificacionTutores(){
            var cantTutores = 0;
            if($('#inp-nombre-madre').val()!=""){

                if(
                    $('#inp-apellido-madre').val()==""
                    || $('#inp-dni-madre').val()==""
                    || $('#inp-cuil-madre').val()==""
                    || $('#inp-profesion-madre').val()==""
                    || $('#inp-trabajo-madre').val()==""
                    || $('#inp-nacionalidad-madre').val()==""
                    || $('#inp-fijo-madre').val()==""
                    || $('#inp-email-madre').val()==""
                    || $('#inp-localidad-madre').val()==""
                    || $('#inp-barrio-madre').val()==""
                    || $('#inp-calle-madre').val()==""
                    || $('#inp-altura-madre').val()==""
                    || $('#inp-postal-madre').val()==""
                ){
                    $('#textoError').text('Debe completar los campos obligatorios de Madre');
                    $('#cartel_error').modal('show');
                    return false;
                }
                if( !isEmail($('#inp-email-madre').val())) {
                    $('#textoError').text("Email Madre Invalido");
                    $('#cartel_error').modal('show');
                    return false;
                }
                else{
                    cantTutores+=1
                }

            }

            if($('#inp-nombre-padre').val()!=""){

                if($('#inp-apellido-padre').val()==""
                   || $('#inp-dni-padre').val()==""
                   || $('#inp-cuil-padre').val()==""
                   || $('#inp-profesion-padre').val()==""
                   || $('#inp-trabajo-padre').val()==""
                   || $('#inp-nacionalidad-padre').val()==""
                   || $('#inp-fijo-padre').val()==""
                   || $('#inp-email-padre').val()==""
                   || $('#inp-localidad-padre').val()==""
                   || $('#inp-barrio-padre').val()==""
                   || $('#inp-calle-padre').val()==""
                   || $('#inp-altura-padre').val()==""
                   || $('#inp-postal-padre').val()=="")
                {
                    $('#textoError').text('Debe completar los campos obligatorios de Padre');
                    $('#cartel_error').modal('show');
                    return false;

                }
                if( !isEmail($('#inp-email-padre').val())) {
                    $('#textoError').text("Email Padre Invalido");
                    $('#cartel_error').modal('show');
                    return false;
                }
                else{
                    cantTutores+=1
                }
            }


            if($('#inp-nombre-tutor').val()!=""){
                if($('#inp-apellido-tutor').val()==""
                   || $('#inp-dni-tutor').val()==""
                   || $('#inp-cuil-tutor').val()==""
                   || $('#inp-profesion-tutor').val()==""
                   || $('#inp-trabajo-tutor').val()==""
                   || $('#inp-nacionalidad-tutor').val()==""
                   || $('#inp-fijo-tutor').val()==""
                   || $('#inp-email-tutor').val()==""
                   || $('#inp-localidad-tutor').val()==""
                   || $('#inp-barrio-tutor').val()==""
                   || $('#inp-calle-tutor').val()==""
                   || $('#inp-altura-tutor').val()==""
                   || $('#inp-postal-tutor').val()=="")
                {
                    $('#textoError').text('Debe completar los campos obligatorios de Tutor');
                    $('#cartel_error').modal('show');
                    return false;
                }
                if( !isEmail($('#inp-email-tutor').val())) {
                    $('#textoError').text("Email Tutor Invalido");
                    $('#cartel_error').modal('show');
                    return false;
                }
                else{
                    cantTutores+=1

                }
            }

            if(cantTutores==0){
                $('#textoError').text('El alumno debe tener por lo menos 1 tutor legal');
                $('#cartel_error').modal('show');
                return false;
            }
            else{
                return true;
            }

            if(cantTutores==0){
                $('#textoError').text('El alumno debe tener por lo menos 1 tutor legal');
                $('#cartel_error').modal('show');
                return false;
            }
            else{
                return true;
            }
        }




    </script>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>

    </body>

</html>


